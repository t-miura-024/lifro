# テーブル定義

## users - ユーザー
| カラム名   | データ型   | 説明                                     |
| ---------- | ---------- | ---------------------------------------- |
| id         | INTEGER    | ユーザーID (Primary Key, Auto Increment) |
| email      | VARCHAR    | メールアドレス (Unique)                  |
| created_at | TIMESTAMP  | 作成日時                                 |
| updated_at | TIMESTAMP  | 更新日時                                 |

## exercises - 種目
| カラム名   | データ型 | 説明                                           |
| ---------- | -------- | ---------------------------------------------- |
| id         | INTEGER  | エクササイズID (Primary Key, Auto Increment)   |
| user_id    | INTEGER  | ユーザーID (Foreign Key → users.id)            |
| name       | VARCHAR  | 種目名                                         |
| sort_index | INTEGER  | 並び順（ユーザー内での表示順、デフォルト: 0）  |
| created_at | TIMESTAMP | 作成日時                                       |
| updated_at | TIMESTAMP | 更新日時                                       |

インデックス: `user_id`

## sets - セット
| カラム名    | データ型 | 説明                                            |
| ----------- | -------- | ----------------------------------------------- |
| id          | INTEGER  | セットID (Primary Key, Auto Increment)          |
| exercise_id | INTEGER  | 種目ID (Foreign Key → exercises.id)             |
| user_id     | INTEGER  | ユーザーID (Foreign Key → users.id)             |
| weight      | FLOAT    | 重量 (kg)                                       |
| reps        | INTEGER  | レップ数                                        |
| date        | DATE     | トレーニング日（ユーザーのタイムゾーン基準の暦日） |
| sort_index  | INTEGER  | 並び順（同日内での表示順）                      |
| created_at  | TIMESTAMP | 作成日時                                        |
| updated_at  | TIMESTAMP | 更新日時                                        |

インデックス: `user_id`, `exercise_id`

## training_memos - トレーニングメモ
| カラム名   | データ型  | 説明                                         |
| ---------- | --------- | -------------------------------------------- |
| id         | INTEGER   | メモID (Primary Key, Auto Increment)         |
| user_id    | INTEGER   | ユーザーID (Foreign Key → users.id)          |
| date       | DATE      | トレーニング日（ユーザーのタイムゾーン基準の暦日） |
| content    | TEXT      | メモ内容                                     |
| created_at | TIMESTAMP | 作成日時                                     |
| updated_at | TIMESTAMP | 更新日時                                     |

インデックス: `(user_id, date)`

## body_parts - 部位マスタ
| カラム名   | データ型       | 説明                                     |
| ---------- | -------------- | ---------------------------------------- |
| id         | INTEGER        | 部位ID (Primary Key, Auto Increment)     |
| category   | ENUM           | 部位カテゴリ (CHEST, BACK, SHOULDER, ARM, ABS, LEG) |
| name       | VARCHAR        | 部位名                                   |
| sort_index | INTEGER        | 並び順（デフォルト: 0）                  |
| created_at | TIMESTAMP      | 作成日時                                 |
| updated_at | TIMESTAMP      | 更新日時                                 |

ユニーク制約: `(category, name)`
インデックス: `category`

### 部位マスタデータ
| カテゴリ | 部位名 |
| -------- | ------ |
| CHEST（胸） | 上部、中部、下部 |
| BACK（背中） | 広背筋、僧帽筋、脊柱起立筋 |
| SHOULDER（肩） | 前部、中部、後部 |
| ARM（腕） | 二頭筋、三頭筋、前腕筋 |
| ABS（腹筋） | 上部、下部、横腹 |
| LEG（脚） | 太もも前、太もも裏、臀部、ふくらはぎ |

## exercise_body_parts - 種目-部位紐付け
| カラム名     | データ型  | 説明                                          |
| ------------ | --------- | --------------------------------------------- |
| id           | INTEGER   | ID (Primary Key, Auto Increment)              |
| exercise_id  | INTEGER   | 種目ID (Foreign Key → exercises.id)           |
| body_part_id | INTEGER   | 部位ID (Foreign Key → body_parts.id)          |
| load_ratio   | INTEGER   | 負荷割合（0-100、各種目の合計は100になる）    |
| created_at   | TIMESTAMP | 作成日時                                      |
| updated_at   | TIMESTAMP | 更新日時                                      |

ユニーク制約: `(exercise_id, body_part_id)`
インデックス: `exercise_id`, `body_part_id`

## timers - タイマー
| カラム名   | データ型  | 説明                                     |
| ---------- | --------- | ---------------------------------------- |
| id         | INTEGER   | タイマーID (Primary Key, Auto Increment) |
| user_id    | INTEGER   | ユーザーID (Foreign Key → users.id)      |
| name       | VARCHAR   | タイマー名                               |
| sort_index | INTEGER   | 並び順（ユーザー内での表示順、デフォルト: 0） |
| created_at | TIMESTAMP | 作成日時                                 |
| updated_at | TIMESTAMP | 更新日時                                 |

インデックス: `user_id`

## unit_timers - ユニットタイマー
| カラム名               | データ型  | 説明                                         |
| ---------------------- | --------- | -------------------------------------------- |
| id                     | INTEGER   | ユニットタイマーID (Primary Key, Auto Increment) |
| timer_id               | INTEGER   | タイマーID (Foreign Key → timers.id)         |
| sort_index             | INTEGER   | 並び順（タイマー内での表示順、デフォルト: 0）|
| duration               | INTEGER   | 時間（秒単位）                               |
| count_sound            | VARCHAR   | カウント音のプリセットID（null: 音なし）     |
| count_sound_last_3_sec | VARCHAR   | 終了3秒前の音のプリセットID（null: 音なし） |
| end_sound              | VARCHAR   | 終了音のプリセットID（null: 音なし）         |
| created_at             | TIMESTAMP | 作成日時                                     |
| updated_at             | TIMESTAMP | 更新日時                                     |

インデックス: `timer_id`

---

## NextAuth 用テーブル

### accounts - OAuth アカウント
| カラム名            | データ型 | 説明                           |
| ------------------- | -------- | ------------------------------ |
| id                  | INTEGER  | Primary Key, Auto Increment    |
| user_id             | INTEGER  | Foreign Key → users.id         |
| type                | VARCHAR  | アカウントタイプ               |
| provider            | VARCHAR  | プロバイダー名 (google 等)     |
| provider_account_id | VARCHAR  | プロバイダー側のアカウントID   |
| refresh_token       | TEXT     | リフレッシュトークン           |
| access_token        | TEXT     | アクセストークン               |
| expires_at          | INTEGER  | トークン有効期限               |
| token_type          | VARCHAR  | トークンタイプ                 |
| scope               | VARCHAR  | スコープ                       |
| id_token            | TEXT     | IDトークン                     |
| session_state       | VARCHAR  | セッション状態                 |

ユニーク制約: `(provider, provider_account_id)`

### sessions - セッション
| カラム名      | データ型  | 説明                       |
| ------------- | --------- | -------------------------- |
| id            | VARCHAR   | Primary Key (CUID)         |
| session_token | VARCHAR   | セッショントークン (Unique) |
| user_id       | INTEGER   | Foreign Key → users.id     |
| expires       | TIMESTAMP | 有効期限                   |
