# テーブル定義

## users - ユーザー
| カラム名   | データ型   | 説明                                     |
| ---------- | ---------- | ---------------------------------------- |
| id         | INTEGER    | ユーザーID (Primary Key, Auto Increment) |
| email      | VARCHAR    | メールアドレス (Unique)                  |
| created_at | TIMESTAMP  | 作成日時                                 |
| updated_at | TIMESTAMP  | 更新日時                                 |

## exercises - 種目
| カラム名   | データ型 | 説明                                           |
| ---------- | -------- | ---------------------------------------------- |
| id         | INTEGER  | エクササイズID (Primary Key, Auto Increment)   |
| user_id    | INTEGER  | ユーザーID (Foreign Key → users.id)            |
| name       | VARCHAR  | 種目名                                         |
| sort_index | INTEGER  | 並び順（ユーザー内での表示順、デフォルト: 0）  |
| created_at | TIMESTAMP | 作成日時                                       |
| updated_at | TIMESTAMP | 更新日時                                       |

インデックス: `user_id`

## sets - セット
| カラム名    | データ型 | 説明                                            |
| ----------- | -------- | ----------------------------------------------- |
| id          | INTEGER  | セットID (Primary Key, Auto Increment)          |
| exercise_id | INTEGER  | 種目ID (Foreign Key → exercises.id)             |
| user_id     | INTEGER  | ユーザーID (Foreign Key → users.id)             |
| weight      | FLOAT    | 重量 (kg)                                       |
| reps        | INTEGER  | レップ数                                        |
| date        | DATE     | トレーニング日（ユーザーのタイムゾーン基準の暦日） |
| sort_index  | INTEGER  | 並び順（同日内での表示順）                      |
| created_at  | TIMESTAMP | 作成日時                                        |
| updated_at  | TIMESTAMP | 更新日時                                        |

インデックス: `user_id`, `exercise_id`

## training_memos - トレーニングメモ
| カラム名   | データ型  | 説明                                         |
| ---------- | --------- | -------------------------------------------- |
| id         | INTEGER   | メモID (Primary Key, Auto Increment)         |
| user_id    | INTEGER   | ユーザーID (Foreign Key → users.id)          |
| date       | DATE      | トレーニング日（ユーザーのタイムゾーン基準の暦日） |
| content    | TEXT      | メモ内容                                     |
| created_at | TIMESTAMP | 作成日時                                     |
| updated_at | TIMESTAMP | 更新日時                                     |

インデックス: `(user_id, date)`

---

## NextAuth 用テーブル

### accounts - OAuth アカウント
| カラム名            | データ型 | 説明                           |
| ------------------- | -------- | ------------------------------ |
| id                  | INTEGER  | Primary Key, Auto Increment    |
| user_id             | INTEGER  | Foreign Key → users.id         |
| type                | VARCHAR  | アカウントタイプ               |
| provider            | VARCHAR  | プロバイダー名 (google 等)     |
| provider_account_id | VARCHAR  | プロバイダー側のアカウントID   |
| refresh_token       | TEXT     | リフレッシュトークン           |
| access_token        | TEXT     | アクセストークン               |
| expires_at          | INTEGER  | トークン有効期限               |
| token_type          | VARCHAR  | トークンタイプ                 |
| scope               | VARCHAR  | スコープ                       |
| id_token            | TEXT     | IDトークン                     |
| session_state       | VARCHAR  | セッション状態                 |

ユニーク制約: `(provider, provider_account_id)`

### sessions - セッション
| カラム名      | データ型  | 説明                       |
| ------------- | --------- | -------------------------- |
| id            | VARCHAR   | Primary Key (CUID)         |
| session_token | VARCHAR   | セッショントークン (Unique) |
| user_id       | INTEGER   | Foreign Key → users.id     |
| expires       | TIMESTAMP | 有効期限                   |
