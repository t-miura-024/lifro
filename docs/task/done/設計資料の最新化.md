# 設計資料の最新化

# 概要
要件定義が完了したため、既存の設計資料を最新の要件定義に合わせて更新する。また、設計資料に不足している部分がないかを確認し、必要に応じて追加・修正を行う。

# 方針
以下の順序で進める：
1. 現状の要件定義に合わせて、既存の各種設計資料を最新化する
   - 画面遷移図のレビュー・更新（ルーティン機能の削除）
   - ER図のレビュー・更新（ルーティン関連テーブルの削除）
   - テーブル定義のレビュー・更新（ルーティン関連テーブルの削除）
   - アーキテクチャのレビュー・補完（TODOの解消を含む）
   - 技術スタックのレビュー・更新

2. 最新化された設計資料に対して加筆修正が必要ないかどうかをチェックする
   - 要件定義と設計資料の整合性確認
   - 足りない設計資料の特定

3. 必要に応じて設計資料を修正・追加する
   - 不足している設計資料の作成
   - 既存設計資料の詳細化
   - 設計資料内のTODOを全て解消する

# 完了の定義
- 全ての設計資料が最新の要件定義と整合していること
- 設計資料に記載されているTODOが全て解消されていること
- ルーティン機能に関する記述が削除されていること
- 開発を始めるために必要な設計情報が全て揃っていること

# 振り返り
## やったこと (Y)
- 要件定義書にトレーニングの概念を明確化する記述を追加
- 画面遷移図からルーティン機能と管理者機能を削除
- ER図からルーティン関連テーブルを削除
- トレーニングを二次情報として扱うため、データモデルを修正
- テーブル定義を最新のER図と整合させるよう更新
- アーキテクチャ設計のTODOを解消し、ディレクトリ構成を詳細化
- コロケーションパターンの適用方法を明確化
- コンポーネント配置を`_components`というプライベートディレクトリに統一
- 技術スタックを確認し、最新の要件と整合していることを確認

## わかったこと (W)
### 技術面
- 不要な機能（ルーティン機能、管理者機能）を早めに削除することで、設計がシンプルになり保守性が高まる
- トレーニング概念は論理的なグループ化であり、別テーブルとして持つよりも、セットの属性として持つ方が設計がシンプルになる
- Next.jsのApp Routerを使用する場合、コロケーションパターンを徹底することでコードの組織化がしやすくなる
- プライベートディレクトリ（`_components`など）を明示的に使用することで、ディレクトリ構造の意図が明確になる
- ルートグループの命名（`(public)`/`(authenticated)`）を工夫することで、その役割がより明確になる

### プロセス面
- タスク化と完了の定義の明確化により作業の範囲とゴールが明確になる
- 段階的なアプローチ（要件→設計確認→更新）が効率的
- 振り返りプロセスが学びを定着させる機会になる
- 対話型の意思決定プロセスが設計上の判断を洗練させる
- ドキュメント駆動開発が実装フェーズでの方向性を明確にする

## 次にやること (T)
- Prismaのスキーマ定義ファイル作成（トレーニングを属性として持つデータモデルの実装）
- 認証フローの実装（NextAuth.jsを使ったGoogle認証の導入）
- App Router基本構造の実装（ルートグループの構成と意図の明確化）
- UIコンポーネントの基礎設計（`_components`ディレクトリの構成）
