# 要件定義

## 機能要件

### ログ機能
- ユーザーが筋トレの成果を入力できる。
  - 種目
  - 重量
  - レップ数
- 種目、重量、レップ数をまとめてセットとして入力できる。
  - 入力前は前回の入力値を表示する。
  - 入力後は前回の入力値との差分を表示する。
  - 種目名は登録済みの種目からプルダウンで選択できる。
- トレーニングの概念
  - トレーニングはセットを日単位でまとめた概念であり、セットの二次情報である。
  - 複数のセットが同じ日に行われた場合、それらは同一のトレーニングとして扱われる。
- トレーニング（セットのグループ）を日付で入力できる。
  - カレンダーから日付を選択できる。
  - 過去の日付にさかのぼって入力できる。
- 入力済みログの管理
  - 記録の編集・削除ができる。
- トレーニングメモ
  - トレーニング（日単位）に対して複数のメモを入力できる。
  - メモはログ作成・編集画面で入力・編集・削除できる。
  - ログ一覧画面ではメモの有無がアイコンで表示される。
  - アイコンをクリックするとポップオーバーでメモ内容を確認できる。
- 前回値・差分の定義
  - 前回値は「前回のトレーニング（前回の日付）における同一種目の最後のセットの重量・レップ数」とする。
  - 差分は、現在入力中のセット値と前回値との差（重量・レップ数ごと）を表示する。

### 種目管理機能
- ユーザーが種目情報を管理できる。
  - 種目の一覧表示ができる。
  - 種目の新規作成ができる。
  - 種目名の編集ができる。
  - 種目の削除ができる。
    - トレーニング記録が紐づいている種目は削除できない。
  - 種目の並び順をドラッグ&ドロップで変更できる。
    - 並び順はログ入力時の種目選択プルダウンに反映される。

### 統計機能
- 入力された筋トレの成果をグラフィカルに表示するダッシュボードを提供する。
  - 日別・週別・月別のトレーニング合計や、種目別の進捗（例：最大重量やレップ数の推移）をグラフで表示する。
  - トレーニングの頻度や継続日数を表示し、ユーザーの習慣化をサポートする。
  - 各種目のパフォーマンス向上を視覚化し、過去の記録と比較できる。
  - トレーニングのボリューム（総負荷量）を自動計算し、推移をグラフで表示する。
- 指標の定義
  - ボリューム = weight × reps
  - 最大重量 = 指定期間内の各種目のセット重量の最大値
  - 継続日数 = 連続して記録がある日数（未記録日が入るとリセット）

### 認証機能
- Googleアカウントを利用した認証機能を提供する。
  - ユーザーがGoogleアカウントでログインできるようにする。
  - ログイン状態を維持できる。
  - ログアウト機能を提供する。

## 非機能要件

### ユーザビリティ
- シンプルで直感的なUIを提供し、ユーザーが迷わずに操作できるようにする。
  - 重要な機能へのアクセスは3タップ以内で可能にする。
  - 入力フォームは自動補完機能を備える。
  - エラーメッセージは具体的で分かりやすい内容にする。
- モバイルデバイスでも快適に操作できるレスポンシブデザインを採用する。
  - 標準画面は Pixel 9（1080×2424）。論理解像度約 411×915dp を基準に最適化する。
  - ビューポートは `width=device-width, initial-scale=1, viewport-fit=cover` を設定する。
  - タッチターゲットは 44dp 以上とする（ボタン、アイコンボタン）。
  - 片手操作（親指リーチ）を考慮し、主要アクションは画面下部または右上に配置する。
  - セーフエリア（ノッチ/ホームインジケータ）を考慮し、`100dvh` とパディングで吸収する。
- トレーニング中の片手操作に対応したUIを提供する。
  - 大きなボタンやスワイプ操作など、トレーニング中でも操作しやすい設計にする。

### セキュリティ
- ユーザーのデータを安全に保存し、第三者からの不正アクセスを防ぐ。
  - すべての通信はHTTPS経由で行う。
  - 個人情報は適切に暗号化して保存する。
- ユーザー認証機能を実装し、データのプライバシーを保護する。
  - 認証トークンの有効期限を適切に設定する。
  - セッション管理を適切に行い、不正なアクセスを防止する。
